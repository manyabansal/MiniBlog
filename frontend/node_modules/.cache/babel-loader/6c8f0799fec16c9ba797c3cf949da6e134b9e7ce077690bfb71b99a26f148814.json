{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/maany/OneDrive/Desktop/myBlog/my-blog/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/maany/OneDrive/Desktop/myBlog/my-blog/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/maany/OneDrive/Desktop/myBlog/my-blog/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useContext}from\"react\";import\"bootstrap/dist/css/bootstrap.css\";import\"./css/navigation.css\";import{Avatar}from\"antd\";import{useNavigate}from\"react-router-dom\";import{UserContext}from\"../user-context\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var navLinks=[{title:\"Home\",path:\"/home\"},{title:\"My posts\",path:\"\"},{title:\"Search\",path:\"/search\"},{title:\"Create new post\",path:\"\"}];function Navigation(){var navigate=useNavigate();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),menuActive=_useState2[0],setMenuActive=_useState2[1];var _useContext=useContext(UserContext),userInfo=_useContext.userInfo,setUserInfo=_useContext.setUserInfo;useEffect(function(){fetch(\"/api/profile\",{credentials:\"include\"}).then(function(res){res.json().then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(userInfo){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setUserInfo(userInfo);case 1:case\"end\":return _context.stop();}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());});},[]);function logout(){fetch(\"/api/logout\",{method:\"POST\",credentials:\"include\"}).then(function(){setUserInfo(null);navigate(\"/login\");});navLinks[3].path=\"/login\";}var username=userInfo===null||userInfo===void 0?void 0:userInfo.username;navLinks[1].path=\"/posts/\".concat(userInfo===null||userInfo===void 0?void 0:userInfo.id);navLinks[3].path=userInfo!==null&&userInfo!==void 0&&userInfo.username?\"/create-post\":\"/login\";return/*#__PURE__*/_jsx(\"div\",{className:\"navigation-bar\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"nav\",{className:\"navbar navbar-expand-lg navbar-light d-flex py-3\",children:[/*#__PURE__*/_jsx(\"a\",{className:\"navbar-brand\",href:\"/\",children:\"MiniBlog\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"navbar-collapse d-flex \".concat(menuActive&&\"active\"),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"nav navbar-nav\",children:[navLinks.map(function(link,index){return/*#__PURE__*/_jsx(\"a\",{className:\"nav-item nav-link \".concat(!(userInfo!==null&&userInfo!==void 0&&userInfo.username)&&index===1&&\"d-none\"),href:link.path,children:link.title},index);}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-lg-none\",children:[!username&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"a\",{className:\"nav-item nav-link\",href:\"/login\",children:\"Login\"}),/*#__PURE__*/_jsx(\"a\",{className:\"nav-item nav-link\",href:\"/sign-up\",children:\"Sign Up\"})]}),username&&/*#__PURE__*/_jsx(\"button\",{className:\"nav-item nav-link\",onClick:logout,children:\"Log Out\"})]})]}),!username&&/*#__PURE__*/_jsxs(\"div\",{className:\"buttons navbar-nav d-none align-items-center\\n               d-lg-block d-lg-flex\\n              \",children:[/*#__PURE__*/_jsx(\"a\",{className:\" button nav-item nav-link me-2\",href:\"/login\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-outline-dark\",children:\"Login\"})}),/*#__PURE__*/_jsxs(\"a\",{className:\"button nav-item nav-link \",href:\"/sign-up\",children:[\" \",/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-dark\",children:\"Sign Up\"}),\" \"]})]}),username&&/*#__PURE__*/_jsxs(\"div\",{class:\"dropdown\",children:[/*#__PURE__*/_jsx(\"button\",{class:\"dropdown-toggle\",type:\"button\",id:\"dropdownMenuButton\",\"data-toggle\":\"dropdown\",\"aria-haspopup\":\"true\",\"aria-expanded\":\"false\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"avatar-span d-flex align-items-center nav-item\",children:[/*#__PURE__*/_jsx(Avatar,{className:\" me-2\",style:{backgroundColor:\"#fde3cf\",color:\"#f56a00\"},children:\"\".concat(username).slice(0,1).toLocaleUpperCase()}),/*#__PURE__*/_jsx(\"span\",{className:\"avatar-name\",children:\"\".concat(username)})]})}),/*#__PURE__*/_jsx(\"div\",{class:\"dropdown-menu\",\"aria-labelledby\":\"dropdownMenuButton\",children:/*#__PURE__*/_jsx(\"a\",{class:\"dropdown-item\",onClick:logout,children:\"Logout\"})})]})]}),/*#__PURE__*/_jsx(\"span\",{className:\"navbar-toggler-icon d-lg-none\",onClick:function onClick(){return setMenuActive(!menuActive);}})]})})});}export default Navigation;","map":{"version":3,"names":["React","useState","useEffect","useContext","Avatar","useNavigate","UserContext","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","navLinks","title","path","Navigation","navigate","_useState","_useState2","_slicedToArray","menuActive","setMenuActive","_useContext","userInfo","setUserInfo","fetch","credentials","then","res","json","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","stop","_x","apply","arguments","logout","method","username","concat","id","className","children","href","map","link","index","onClick","type","class","style","backgroundColor","color","slice","toLocaleUpperCase"],"sources":["C:/Users/maany/OneDrive/Desktop/myBlog/my-blog/frontend/src/components/navigation.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\r\nimport \"bootstrap/dist/css/bootstrap.css\";\r\nimport \"./css/navigation.css\";\r\nimport { Avatar } from \"antd\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { UserContext } from \"../user-context\";\r\n\r\nconst navLinks = [\r\n  {\r\n    title: \"Home\",\r\n    path: \"/home\",\r\n  },\r\n  {\r\n    title: \"My posts\",\r\n    path: \"\",\r\n  },\r\n  {\r\n    title: \"Search\",\r\n    path: \"/search\",\r\n  },\r\n  {\r\n    title: \"Create new post\",\r\n    path: \"\"\r\n  }\r\n];\r\n\r\nfunction Navigation() {\r\n  const navigate = useNavigate();\r\n  const [menuActive, setMenuActive] = useState(false);\r\n  const {userInfo, setUserInfo}=useContext(UserContext);\r\n  useEffect(() => {\r\n   \r\n    fetch(\"/api/profile\", {\r\n      credentials: \"include\",\r\n    }).then((res) => {\r\n      res.json().then(async (userInfo) => {\r\n       setUserInfo(userInfo);\r\n     \r\n      });\r\n    });\r\n  }, []);\r\n\r\n  function logout() {\r\n    fetch(\"/api/logout\", {\r\n      method: \"POST\",\r\n      credentials: \"include\",\r\n    }).then(()=>{\r\n      setUserInfo(null);\r\n      navigate(\"/login\");\r\n    });\r\n    \r\n    navLinks[3].path = \"/login\";\r\n  }\r\n\r\n  const username= userInfo?.username;\r\n\r\n  navLinks[1].path=`/posts/${userInfo?.id}`;\r\n  navLinks[3].path = userInfo?.username ? \"/create-post\" : \"/login\";\r\n  return (\r\n    <div className=\"navigation-bar\">\r\n      <div className=\"container\">\r\n        <nav className=\"navbar navbar-expand-lg navbar-light d-flex py-3\">\r\n          <a className=\"navbar-brand\" href=\"/\">\r\n            MiniBlog\r\n          </a>\r\n\r\n          <div className={`navbar-collapse d-flex ${menuActive && \"active\"}`}>\r\n            <div className=\"nav navbar-nav\">\r\n              {navLinks.map((link, index) => {\r\n                return (\r\n                  <a key={index} className={`nav-item nav-link ${(!userInfo?.username && index===1) && `d-none`}`} href={link.path}>\r\n                    {link.title}\r\n                  </a>\r\n                );\r\n              })}\r\n              <div className=\"d-lg-none\">\r\n                {!username && (\r\n                  <>\r\n                    <a className={`nav-item nav-link`} href=\"/login\">\r\n                      Login\r\n                    </a>\r\n                    <a className={`nav-item nav-link`} href=\"/sign-up\">\r\n                      Sign Up\r\n                    </a>\r\n                  </>\r\n                )}\r\n                {username && (\r\n                \r\n                  <button\r\n                    className={`nav-item nav-link`}\r\n                    onClick={logout}\r\n                  >\r\n                    Log Out\r\n                  </button>\r\n                 \r\n                )}\r\n              </div>\r\n            </div>\r\n          \r\n          {!username && (\r\n              <div\r\n              className={`buttons navbar-nav d-none align-items-center\r\n               d-lg-block d-lg-flex\r\n              `}\r\n            >\r\n              <a className=\" button nav-item nav-link me-2\" href=\"/login\">\r\n                <button type=\"button\" className=\"btn btn-outline-dark\">\r\n                  Login\r\n                </button>\r\n              </a>\r\n              <a className=\"button nav-item nav-link \" href=\"/sign-up\">\r\n                {\" \"}\r\n                <button type=\"button\" className=\"btn btn-dark\">\r\n                  Sign Up\r\n                </button>{\" \"}\r\n              </a>\r\n            </div>\r\n          )}\r\n          \r\n          {username && (\r\n             <div class=\"dropdown\">\r\n             <button\r\n               class=\"dropdown-toggle\"\r\n               type=\"button\"\r\n               id=\"dropdownMenuButton\"\r\n               data-toggle=\"dropdown\"\r\n               aria-haspopup=\"true\"\r\n               aria-expanded=\"false\"\r\n             >\r\n               <span\r\n                 className={`avatar-span d-flex align-items-center nav-item`}\r\n               >\r\n                 <Avatar\r\n                   className=\" me-2\"\r\n                   style={{ backgroundColor: \"#fde3cf\", color: \"#f56a00\" }}\r\n                 >\r\n                  {`${username}`.slice(0,1).toLocaleUpperCase()}\r\n                 </Avatar>\r\n                 <span className=\"avatar-name\">{`${username}`}</span>\r\n               </span>\r\n             </button>\r\n             <div class=\"dropdown-menu\" aria-labelledby=\"dropdownMenuButton\">\r\n               <a class=\"dropdown-item\" onClick={logout}>\r\n                 Logout\r\n               </a>\r\n             </div>\r\n           </div>\r\n          )}\r\n           \r\n          </div>\r\n          <span\r\n            className=\"navbar-toggler-icon d-lg-none\"\r\n            onClick={() => setMenuActive(!menuActive)}\r\n          />\r\n        </nav>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Navigation;\r\n"],"mappings":"ubAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,UAAU,KAAQ,OAAO,CAC9D,MAAO,kCAAkC,CACzC,MAAO,sBAAsB,CAC7B,OAASC,MAAM,KAAQ,MAAM,CAC7B,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,WAAW,KAAQ,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,QAAA,IAAAC,SAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE9C,GAAM,CAAAC,QAAQ,CAAG,CACf,CACEC,KAAK,CAAE,MAAM,CACbC,IAAI,CAAE,OACR,CAAC,CACD,CACED,KAAK,CAAE,UAAU,CACjBC,IAAI,CAAE,EACR,CAAC,CACD,CACED,KAAK,CAAE,QAAQ,CACfC,IAAI,CAAE,SACR,CAAC,CACD,CACED,KAAK,CAAE,iBAAiB,CACxBC,IAAI,CAAE,EACR,CAAC,CACF,CAED,QAAS,CAAAC,UAAUA,CAAA,CAAG,CACpB,GAAM,CAAAC,QAAQ,CAAGZ,WAAW,CAAC,CAAC,CAC9B,IAAAa,SAAA,CAAoCjB,QAAQ,CAAC,KAAK,CAAC,CAAAkB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA5CG,UAAU,CAAAF,UAAA,IAAEG,aAAa,CAAAH,UAAA,IAChC,IAAAI,WAAA,CAA8BpB,UAAU,CAACG,WAAW,CAAC,CAA9CkB,QAAQ,CAAAD,WAAA,CAARC,QAAQ,CAAEC,WAAW,CAAAF,WAAA,CAAXE,WAAW,CAC5BvB,SAAS,CAAC,UAAM,CAEdwB,KAAK,CAAC,cAAc,CAAE,CACpBC,WAAW,CAAE,SACf,CAAC,CAAC,CAACC,IAAI,CAAC,SAACC,GAAG,CAAK,CACfA,GAAG,CAACC,IAAI,CAAC,CAAC,CAACF,IAAI,6BAAAG,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAC,SAAAC,QAAOX,QAAQ,SAAAS,mBAAA,GAAAG,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAC9Bf,WAAW,CAACD,QAAQ,CAAC,CAAC,wBAAAc,QAAA,CAAAG,IAAA,MAAAN,OAAA,GAEtB,mBAAAO,EAAA,SAAAX,IAAA,CAAAY,KAAA,MAAAC,SAAA,QAAC,CACJ,CAAC,CAAC,CACJ,CAAC,CAAE,EAAE,CAAC,CAEN,QAAS,CAAAC,MAAMA,CAAA,CAAG,CAChBnB,KAAK,CAAC,aAAa,CAAE,CACnBoB,MAAM,CAAE,MAAM,CACdnB,WAAW,CAAE,SACf,CAAC,CAAC,CAACC,IAAI,CAAC,UAAI,CACVH,WAAW,CAAC,IAAI,CAAC,CACjBR,QAAQ,CAAC,QAAQ,CAAC,CACpB,CAAC,CAAC,CAEFJ,QAAQ,CAAC,CAAC,CAAC,CAACE,IAAI,CAAG,QAAQ,CAC7B,CAEA,GAAM,CAAAgC,QAAQ,CAAEvB,QAAQ,SAARA,QAAQ,iBAARA,QAAQ,CAAEuB,QAAQ,CAElClC,QAAQ,CAAC,CAAC,CAAC,CAACE,IAAI,WAAAiC,MAAA,CAAWxB,QAAQ,SAARA,QAAQ,iBAARA,QAAQ,CAAEyB,EAAE,CAAE,CACzCpC,QAAQ,CAAC,CAAC,CAAC,CAACE,IAAI,CAAGS,QAAQ,SAARA,QAAQ,WAARA,QAAQ,CAAEuB,QAAQ,CAAG,cAAc,CAAG,QAAQ,CACjE,mBACEvC,IAAA,QAAK0C,SAAS,CAAC,gBAAgB,CAAAC,QAAA,cAC7B3C,IAAA,QAAK0C,SAAS,CAAC,WAAW,CAAAC,QAAA,cACxBvC,KAAA,QAAKsC,SAAS,CAAC,kDAAkD,CAAAC,QAAA,eAC/D3C,IAAA,MAAG0C,SAAS,CAAC,cAAc,CAACE,IAAI,CAAC,GAAG,CAAAD,QAAA,CAAC,UAErC,CAAG,CAAC,cAEJvC,KAAA,QAAKsC,SAAS,2BAAAF,MAAA,CAA4B3B,UAAU,EAAI,QAAQ,CAAG,CAAA8B,QAAA,eACjEvC,KAAA,QAAKsC,SAAS,CAAC,gBAAgB,CAAAC,QAAA,EAC5BtC,QAAQ,CAACwC,GAAG,CAAC,SAACC,IAAI,CAAEC,KAAK,CAAK,CAC7B,mBACE/C,IAAA,MAAe0C,SAAS,sBAAAF,MAAA,CAAwB,EAACxB,QAAQ,SAARA,QAAQ,WAARA,QAAQ,CAAEuB,QAAQ,GAAIQ,KAAK,GAAG,CAAC,UAAa,CAAG,CAACH,IAAI,CAAEE,IAAI,CAACvC,IAAK,CAAAoC,QAAA,CAC9GG,IAAI,CAACxC,KAAK,EADLyC,KAEL,CAAC,CAER,CAAC,CAAC,cACF3C,KAAA,QAAKsC,SAAS,CAAC,WAAW,CAAAC,QAAA,EACvB,CAACJ,QAAQ,eACRnC,KAAA,CAAAF,SAAA,EAAAyC,QAAA,eACE3C,IAAA,MAAG0C,SAAS,oBAAsB,CAACE,IAAI,CAAC,QAAQ,CAAAD,QAAA,CAAC,OAEjD,CAAG,CAAC,cACJ3C,IAAA,MAAG0C,SAAS,oBAAsB,CAACE,IAAI,CAAC,UAAU,CAAAD,QAAA,CAAC,SAEnD,CAAG,CAAC,EACJ,CACH,CACAJ,QAAQ,eAEPvC,IAAA,WACE0C,SAAS,oBAAsB,CAC/BM,OAAO,CAAEX,MAAO,CAAAM,QAAA,CACjB,SAED,CAAQ,CAET,EACE,CAAC,EACH,CAAC,CAEP,CAACJ,QAAQ,eACNnC,KAAA,QACAsC,SAAS,oGAEP,CAAAC,QAAA,eAEF3C,IAAA,MAAG0C,SAAS,CAAC,gCAAgC,CAACE,IAAI,CAAC,QAAQ,CAAAD,QAAA,cACzD3C,IAAA,WAAQiD,IAAI,CAAC,QAAQ,CAACP,SAAS,CAAC,sBAAsB,CAAAC,QAAA,CAAC,OAEvD,CAAQ,CAAC,CACR,CAAC,cACJvC,KAAA,MAAGsC,SAAS,CAAC,2BAA2B,CAACE,IAAI,CAAC,UAAU,CAAAD,QAAA,EACrD,GAAG,cACJ3C,IAAA,WAAQiD,IAAI,CAAC,QAAQ,CAACP,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAC,SAE/C,CAAQ,CAAC,CAAC,GAAG,EACZ,CAAC,EACD,CACN,CAEAJ,QAAQ,eACNnC,KAAA,QAAK8C,KAAK,CAAC,UAAU,CAAAP,QAAA,eACrB3C,IAAA,WACEkD,KAAK,CAAC,iBAAiB,CACvBD,IAAI,CAAC,QAAQ,CACbR,EAAE,CAAC,oBAAoB,CACvB,cAAY,UAAU,CACtB,gBAAc,MAAM,CACpB,gBAAc,OAAO,CAAAE,QAAA,cAErBvC,KAAA,SACEsC,SAAS,iDAAmD,CAAAC,QAAA,eAE5D3C,IAAA,CAACJ,MAAM,EACL8C,SAAS,CAAC,OAAO,CACjBS,KAAK,CAAE,CAAEC,eAAe,CAAE,SAAS,CAAEC,KAAK,CAAE,SAAU,CAAE,CAAAV,QAAA,CAExD,GAAAH,MAAA,CAAGD,QAAQ,EAAGe,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAACC,iBAAiB,CAAC,CAAC,CACtC,CAAC,cACTvD,IAAA,SAAM0C,SAAS,CAAC,aAAa,CAAAC,QAAA,IAAAH,MAAA,CAAKD,QAAQ,EAAS,CAAC,EAChD,CAAC,CACD,CAAC,cACTvC,IAAA,QAAKkD,KAAK,CAAC,eAAe,CAAC,kBAAgB,oBAAoB,CAAAP,QAAA,cAC7D3C,IAAA,MAAGkD,KAAK,CAAC,eAAe,CAACF,OAAO,CAAEX,MAAO,CAAAM,QAAA,CAAC,QAE1C,CAAG,CAAC,CACD,CAAC,EACH,CACL,EAEI,CAAC,cACN3C,IAAA,SACE0C,SAAS,CAAC,+BAA+B,CACzCM,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAAlC,aAAa,CAAC,CAACD,UAAU,CAAC,EAAC,CAC3C,CAAC,EACC,CAAC,CACH,CAAC,CACH,CAAC,CAEV,CAEA,cAAe,CAAAL,UAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}