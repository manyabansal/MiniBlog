{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/maany/OneDrive/Desktop/myBlog/my-blog/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/maany/OneDrive/Desktop/myBlog/my-blog/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/maany/OneDrive/Desktop/myBlog/my-blog/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import ReactQuill from\"react-quill\";import\"bootstrap/dist/css/bootstrap.css\";import\"react-quill/dist/quill.snow.css\";import\"./css/create-post.css\";import{useState}from\"react\";import{Navigate}from\"react-router\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var modules={toolbar:[[{header:[1,2,false]}],[\"bold\",\"italic\",\"underline\",\"strike\",\"blockquote\"],[{list:\"ordered\"},{list:\"bullet\"},{indent:\"-1\"},{indent:\"+1\"}],[\"link\",\"image\"],[\"clean\"]]};var formats=[\"header\",\"bold\",\"italic\",\"underline\",\"strike\",\"blockquote\",\"list\",\"bullet\",\"indent\",\"link\",\"image\"];export default function CreatePost(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),summary=_useState4[0],setSummary=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),content=_useState6[0],setContent=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),files=_useState8[0],setFiles=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),category1=_useState10[0],setCategory1=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),category2=_useState12[0],setCategory2=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),redirect=_useState14[0],setRedirect=_useState14[1];function createNewPost(_x){return _createNewPost.apply(this,arguments);}function _createNewPost(){_createNewPost=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(ev){var data,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:data=new FormData();data.set(\"title\",title);data.set(\"summary\",summary);data.set(\"content\",content);data.set(\"file\",files[0]);data.set(\"category1\",category1);data.set(\"category2\",category2);ev.preventDefault();_context.next=10;return fetch('/api/post',{method:'POST',body:data,credentials:\"include\"});case 10:response=_context.sent;if(response.ok){setRedirect(true);}case 12:case\"end\":return _context.stop();}},_callee);}));return _createNewPost.apply(this,arguments);}if(redirect){return/*#__PURE__*/_jsx(Navigate,{to:'/home'});}return/*#__PURE__*/_jsxs(\"form\",{onSubmit:createNewPost,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"top\",children:\"Title\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"title\",className:\"form-control\",placeholder:\"Title\",value:title,onChange:function onChange(event){return setTitle(event.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Summary\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",type:\"summary\",placeholder:\"Summary\",name:\"summary\",value:summary,maxLength:400,onChange:function onChange(event){return setSummary(event.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"File\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",name:\"file\",type:\"file\",onChange:function onChange(ev){return setFiles(ev.target.files);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Categories\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-control category\",name:\"category1\",type:\"text\",value:category1,onChange:function onChange(event){return setCategory1(event.target.value);}}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control category\",name:\"category2\",type:\"text\",value:category2,onChange:function onChange(event){return setCategory2(event.target.value);}})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Content\"}),/*#__PURE__*/_jsx(ReactQuill,{value:content,modules:modules,formats:formats,onChange:function onChange(newValue){return setContent(newValue);}})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-dark\",children:\"Create Post\"})]});}","map":{"version":3,"names":["ReactQuill","useState","Navigate","jsx","_jsx","jsxs","_jsxs","modules","toolbar","header","list","indent","formats","CreatePost","_useState","_useState2","_slicedToArray","title","setTitle","_useState3","_useState4","summary","setSummary","_useState5","_useState6","content","setContent","_useState7","_useState8","files","setFiles","_useState9","_useState10","category1","setCategory1","_useState11","_useState12","category2","setCategory2","_useState13","_useState14","redirect","setRedirect","createNewPost","_x","_createNewPost","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","ev","data","response","wrap","_callee$","_context","prev","next","FormData","set","preventDefault","fetch","method","body","credentials","sent","ok","stop","to","onSubmit","children","className","type","name","placeholder","value","onChange","event","target","maxLength","newValue"],"sources":["C:/Users/maany/OneDrive/Desktop/myBlog/my-blog/frontend/src/pages/create-post.js"],"sourcesContent":["import ReactQuill from \"react-quill\";\r\nimport \"bootstrap/dist/css/bootstrap.css\";\r\nimport \"react-quill/dist/quill.snow.css\";\r\nimport \"./css/create-post.css\";\r\nimport { useState } from \"react\";\r\nimport { Navigate } from \"react-router\";\r\n\r\nconst modules = {\r\n  toolbar: [\r\n    [{ header: [1, 2, false] }],\r\n    [\"bold\", \"italic\", \"underline\", \"strike\", \"blockquote\"],\r\n    [\r\n      { list: \"ordered\" },\r\n      { list: \"bullet\" },\r\n      { indent: \"-1\" },\r\n      { indent: \"+1\" },\r\n    ],\r\n    [\"link\", \"image\"],\r\n    [\"clean\"],\r\n  ],\r\n};\r\n\r\nconst formats = [\r\n  \"header\",\r\n  \"bold\",\r\n  \"italic\",\r\n  \"underline\",\r\n  \"strike\",\r\n  \"blockquote\",\r\n  \"list\",\r\n  \"bullet\",\r\n  \"indent\",\r\n  \"link\",\r\n  \"image\",\r\n];\r\n\r\nexport default function CreatePost() {\r\n  const [title, setTitle] = useState(\"\");\r\n  const [summary, setSummary] = useState(\"\");\r\n  const [content, setContent] = useState(\"\");\r\n  const [files, setFiles] = useState(\"\");\r\n  const [category1, setCategory1]= useState(\"\");\r\n  const [category2, setCategory2]= useState(\"\");\r\n  const [redirect, setRedirect]= useState(false);\r\n  \r\n  async function createNewPost(ev) {\r\n    const data = new FormData();\r\n    data.set(\"title\", title);\r\n    data.set(\"summary\", summary);\r\n    data.set(\"content\", content);\r\n    data.set(\"file\", files[0]);\r\n    data.set(\"category1\", category1);\r\n    data.set(\"category2\", category2);\r\n    ev.preventDefault();\r\n \r\n   const response= await fetch('/api/post', {\r\n        method: 'POST',\r\n        body: data,\r\n        credentials: \"include\",\r\n    });\r\n\r\n    if(response.ok ){\r\n        setRedirect(true);\r\n    }\r\n  }\r\n  \r\n  if(redirect){\r\n    return <Navigate to={'/home'} />\r\n  }\r\n  return (\r\n    <form onSubmit={createNewPost}>\r\n      <div className=\"form-group\">\r\n        <label className=\"top\">Title</label>\r\n        <input\r\n          type=\"text\"\r\n          name=\"title\"\r\n          className=\"form-control\"\r\n          placeholder={\"Title\"}\r\n          value={title}\r\n          onChange={(event) => setTitle(event.target.value)}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label>Summary</label>\r\n        <input\r\n          className=\"form-control\"\r\n          type=\"summary\"\r\n          placeholder={\"Summary\"}\r\n          name=\"summary\"\r\n          value={summary}\r\n          maxLength={400}\r\n          onChange={(event) => setSummary(event.target.value)}\r\n        />\r\n      </div>\r\n      <div className=\"form-group\">\r\n        <label>File</label>\r\n        <input\r\n          className=\"form-control\"\r\n          name=\"file\"\r\n          type=\"file\"\r\n          onChange={(ev) => setFiles(ev.target.files)}\r\n        />\r\n      </div>\r\n      <div className=\"form-group\">\r\n          <label>Categories</label>\r\n          <div className=\"d-flex\">\r\n          <input className=\"form-control category\"\r\n          name=\"category1\"\r\n          type=\"text\"\r\n          value={category1}\r\n          onChange={(event) => setCategory1(event.target.value)}\r\n           />\r\n           <input className=\"form-control category\"\r\n          name=\"category2\"\r\n          type=\"text\" \r\n          value={category2}\r\n          onChange={(event) => setCategory2(event.target.value)}\r\n           />\r\n           </div>\r\n      </div>\r\n\r\n      <div>\r\n        <label>Content</label>\r\n        <ReactQuill\r\n          value={content}\r\n          modules={modules}\r\n          formats={formats}\r\n          onChange={(newValue) => setContent(newValue)}\r\n        />\r\n      </div>\r\n     \r\n      <button type=\"submit\" className=\"btn btn-dark\">\r\n        Create Post\r\n      </button>\r\n    </form>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}