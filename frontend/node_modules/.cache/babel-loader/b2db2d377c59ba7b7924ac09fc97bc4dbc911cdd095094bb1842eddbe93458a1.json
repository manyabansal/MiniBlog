{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/maany/OneDrive/Desktop/myBlog/my-blog/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/maany/OneDrive/Desktop/myBlog/my-blog/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{useMemo}from\"react\";import{Pagination}from\"antd\";import TagRow from\"./tag-row\";import{Link}from\"react-router-dom\";// import \"bootstrap/dist/css/bootstrap.css\";\nimport\"./css/post-grid.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function PostGrid(_ref){var posts=_ref.posts,current=_ref.current,setCurrent=_ref.setCurrent,setPaginationChanged=_ref.setPaginationChanged;var onChange=function onChange(page){setCurrent(page);setPaginationChanged(true);};var pageSize=10;var paginatedPosts=useMemo(function(){var lastIndex=current*pageSize;var firstIndex=lastIndex-pageSize;return posts.slice(firstIndex,lastIndex);},[current]);function addClick(_x){return _addClick.apply(this,arguments);}function _addClick(){_addClick=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(post){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/api/post/\".concat(post._id,\"?set=click\"),{method:\"PATCH\",credentials:\"include\"});case 2:case\"end\":return _context.stop();}},_callee);}));return _addClick.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"section\",{className:\"pagination-container\",children:[/*#__PURE__*/_jsx(\"section\",{className:\"post-grid container\",children:paginatedPosts.map(function(post,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"post-container\",children:[/*#__PURE__*/_jsx(\"a\",{href:\"/post/\".concat(post._id),onClick:function onClick(){return addClick(post);},children:/*#__PURE__*/_jsx(\"figure\",{className:\"post-image\",children:/*#__PURE__*/_jsx(\"img\",{src:require(\"../../../rest/uploads/\".concat(post.image.slice(8))),alt:post.image})})}),/*#__PURE__*/_jsx(TagRow,{tags:post.categories}),/*#__PURE__*/_jsx(\"h2\",{children:post.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"author-text\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"By:\",/*#__PURE__*/_jsx(\"a\",{href:\"/posts/\".concat(post.author._id),children:post.author.username})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"post-date\",children:[\"- \",post.date]})]})]},index);})}),/*#__PURE__*/_jsx(Pagination,{className:\"paginationItem\",defaultCurrent:current,onChange:onChange,total:posts.length})]});}","map":{"version":3,"names":["React","useMemo","Pagination","TagRow","Link","jsx","_jsx","jsxs","_jsxs","PostGrid","_ref","posts","current","setCurrent","setPaginationChanged","onChange","page","pageSize","paginatedPosts","lastIndex","firstIndex","slice","addClick","_x","_addClick","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","post","wrap","_callee$","_context","prev","next","fetch","concat","_id","method","credentials","stop","className","children","map","index","href","onClick","src","require","image","alt","tags","categories","title","author","username","date","defaultCurrent","total","length"],"sources":["C:/Users/maany/OneDrive/Desktop/myBlog/my-blog/frontend/src/components/post-grid.js"],"sourcesContent":["import React, { useMemo } from \"react\";\r\nimport { Pagination } from \"antd\";\r\nimport TagRow from \"./tag-row\";\r\nimport { Link } from \"react-router-dom\";\r\n// import \"bootstrap/dist/css/bootstrap.css\";\r\nimport \"./css/post-grid.css\";\r\n\r\nexport default function PostGrid({\r\n  posts,\r\n  current,\r\n  setCurrent,\r\n  setPaginationChanged,\r\n}) {\r\n  const onChange = (page) => {\r\n    setCurrent(page);  \r\n    setPaginationChanged(true);\r\n    \r\n  };\r\n\r\n  const pageSize = 10;\r\n  const paginatedPosts = useMemo(() => {\r\n    const lastIndex = current * pageSize;\r\n    const firstIndex = lastIndex - pageSize;\r\n   \r\n    return posts.slice(firstIndex, lastIndex);\r\n  }, [current]);\r\n  async function addClick(post) {\r\n    await fetch(`/api/post/${post._id}?set=click`, {\r\n      method: \"PATCH\",\r\n      credentials: \"include\",\r\n    });\r\n  }\r\n  return (\r\n    <section className=\"pagination-container\">\r\n      <section className=\"post-grid container\">\r\n        {paginatedPosts.map((post, index) => {\r\n         \r\n          return (\r\n            <div key={index} className=\"post-container\">\r\n              <a href={`/post/${post._id}`}  onClick={()=>addClick(post)}>\r\n              <figure className=\"post-image\">\r\n                \r\n                 \r\n                  <img\r\n                    src={require(`../../../rest/uploads/${post.image.slice(8)}`)}\r\n                    alt={post.image}\r\n                  />\r\n                 \r\n              \r\n              </figure>\r\n              </a>\r\n              <TagRow tags={post.categories} />\r\n              <h2>{post.title}</h2>\r\n              <p className=\"author-text\">\r\n                <span>\r\n                  By:\r\n                  <a href={`/posts/${post.author._id}`}>{post.author.username}</a>\r\n                </span>\r\n                <span className=\"post-date\">- {post.date}</span>\r\n              </p>\r\n            </div>\r\n          );\r\n        })}\r\n      </section>\r\n      <Pagination\r\n        className=\"paginationItem\"\r\n        defaultCurrent={current}\r\n        onChange={onChange}\r\n        total={posts.length}\r\n      />\r\n    </section>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}