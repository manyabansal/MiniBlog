{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/maany/OneDrive/Desktop/myBlog/my-blog/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/maany/OneDrive/Desktop/myBlog/my-blog/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/maany/OneDrive/Desktop/myBlog/my-blog/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useRef,useEffect}from\"react\";import\"bootstrap/dist/css/bootstrap.css\";import\"./css/home.css\";import PostMasonry from\"../components/post-masonry\";import MasonryPost from\"../components/masonry-post\";import PostGrid from\"../components/post-grid\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var trendingConfig={1:{gridArea:\"1/2/3/3\"}};var featuredConfig={0:{gridArea:\"1/1/2/3\",height:\"300px\",width:\"100%\"},1:{height:\"300px\",width:\"100%\"},3:{height:\"630px\",marginLeft:\"30px\",width:\"630px\"}};var mergeStyles=function mergeStyles(posts,config){posts.forEach(function(post,index){post.style=config[index];});};function Home(){var _useState=useState(1),_useState2=_slicedToArray(_useState,2),current=_useState2[0],setCurrent=_useState2[1];var recentPostsRef=useRef(null);var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),paginationChanged=_useState4[0],setPaginationChanged=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),trending=_useState6[0],setTrending=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),featured=_useState8[0],setFeatured=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),lastPost=_useState10[0],setLastPost=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),recentPosts=_useState12[0],setRecent=_useState12[1];useEffect(function(){fetch(\"https://miniblog-cxzz.onrender.com/post\").then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(response){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return response.json().then(function(posts){setTrending(posts.trending);setFeatured(posts.featured);setRecent(posts.recent);});case 2:case\"end\":return _context.stop();}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}()).catch(function(err){return console.log(err);});},[]);useEffect(function(){if(featured.length>0){setLastPost(featured.pop());}},[featured]);useEffect(function(){if(paginationChanged){recentPostsRef===null||recentPostsRef===void 0?void 0:recentPostsRef.current.scrollIntoView({behavior:\"smooth\"});return function(){setPaginationChanged(false);};}},[paginationChanged]);mergeStyles(trending,trendingConfig);mergeStyles(featured,featuredConfig);if(trending.length>0&&featured.length>0&&lastPost){return/*#__PURE__*/_jsx(\"main\",{className:\"home\",children:/*#__PURE__*/_jsx(\"section\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Featured Posts\"}),/*#__PURE__*/_jsxs(\"section\",{className:\"featured-posts-container\",children:[/*#__PURE__*/_jsx(PostMasonry,{posts:featured,columns:2,tagsOnTop:true}),/*#__PURE__*/_jsx(MasonryPost,{post:lastPost,tagsOnTop:true,styles:{marginTop:\"40px\"}})]}),/*#__PURE__*/_jsx(\"section\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",ref:recentPostsRef,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Recent Posts\"}),/*#__PURE__*/_jsx(PostGrid,{posts:recentPosts,current:current,setCurrent:setCurrent,setPaginationChanged:setPaginationChanged})]})}),/*#__PURE__*/_jsx(\"h1\",{children:\"Trending Posts\"}),/*#__PURE__*/_jsx(PostMasonry,{posts:trending,columns:3})]})})});}}export default Home;","map":{"version":3,"names":["React","useState","useRef","useEffect","PostMasonry","MasonryPost","PostGrid","jsx","_jsx","jsxs","_jsxs","trendingConfig","gridArea","featuredConfig","height","width","marginLeft","mergeStyles","posts","config","forEach","post","index","style","Home","_useState","_useState2","_slicedToArray","current","setCurrent","recentPostsRef","_useState3","_useState4","paginationChanged","setPaginationChanged","_useState5","_useState6","trending","setTrending","_useState7","_useState8","featured","setFeatured","_useState9","_useState10","lastPost","setLastPost","_useState11","_useState12","recentPosts","setRecent","fetch","then","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","json","recent","stop","_x","apply","arguments","catch","err","console","log","length","pop","scrollIntoView","behavior","className","children","columns","tagsOnTop","styles","marginTop","ref"],"sources":["C:/Users/maany/OneDrive/Desktop/myBlog/my-blog/src/pages/home.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\r\nimport \"bootstrap/dist/css/bootstrap.css\";\r\nimport \"./css/home.css\";\r\nimport PostMasonry from \"../components/post-masonry\";\r\nimport MasonryPost from \"../components/masonry-post\";\r\nimport PostGrid from \"../components/post-grid\";\r\n\r\nconst trendingConfig = {\r\n  1: {\r\n    gridArea: \"1/2/3/3\",\r\n  },\r\n};\r\n\r\nconst featuredConfig = {\r\n  0: {\r\n    gridArea: \"1/1/2/3\",\r\n    height: \"300px\",\r\n    width: \"100%\",\r\n  },\r\n  1: {\r\n    height: \"300px\",\r\n    width: \"100%\",\r\n  },\r\n  3: {\r\n    height: \"630px\",\r\n    marginLeft: \"30px\",\r\n    width: \"630px\",\r\n  },\r\n};\r\n\r\nconst mergeStyles = function (posts, config) {\r\n  posts.forEach((post, index) => {\r\n    post.style = config[index];\r\n  });\r\n};\r\n\r\nfunction Home() {\r\n  const [current, setCurrent] = useState(1);\r\n  const recentPostsRef = useRef(null);\r\n  const [paginationChanged, setPaginationChanged] = useState(false);\r\n  const [trending, setTrending] = useState([]);\r\n  const [featured, setFeatured] = useState([]);\r\n  const [lastPost, setLastPost] = useState(null);\r\n  const [recentPosts, setRecent] = useState([]);\r\n  useEffect(() => {\r\n    fetch(\"https://miniblog-cxzz.onrender.com/post\")\r\n      .then(async (response) => {\r\n        await response.json().then((posts) => {\r\n          setTrending(posts.trending);\r\n          setFeatured(posts.featured);\r\n          setRecent(posts.recent);\r\n        });\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (featured.length > 0) {\r\n      setLastPost(featured.pop());\r\n    }\r\n  }, [featured]);\r\n\r\n  useEffect(() => {\r\n    if (paginationChanged) {\r\n      recentPostsRef?.current.scrollIntoView({ behavior: \"smooth\" });\r\n      return () => {\r\n        setPaginationChanged(false);\r\n      };\r\n    }\r\n  }, [paginationChanged]);\r\n\r\n  mergeStyles(trending, trendingConfig);\r\n  mergeStyles(featured, featuredConfig);\r\n\r\n  if (trending.length > 0 && featured.length > 0 && lastPost) {\r\n    return (\r\n      <main className=\"home\">\r\n        <section className=\"container\">\r\n          <div className=\"row\">\r\n            <h1>Featured Posts</h1>\r\n            <section className=\"featured-posts-container\">\r\n              <PostMasonry posts={featured} columns={2} tagsOnTop={true} />\r\n              <MasonryPost\r\n                post={lastPost}\r\n                tagsOnTop={true}\r\n                styles={{ marginTop: \"40px\" }}\r\n              />\r\n            </section>\r\n\r\n            <section className=\"container\">\r\n              <div className=\"row\" ref={recentPostsRef}>\r\n                <h1>Recent Posts</h1>\r\n                <PostGrid\r\n                  posts={recentPosts}\r\n                  current={current}\r\n                  setCurrent={setCurrent}\r\n                  setPaginationChanged={setPaginationChanged}\r\n                />\r\n              </div>\r\n            </section>\r\n            <h1>Trending Posts</h1>\r\n            <PostMasonry posts={trending} columns={3} />\r\n          </div>\r\n        </section>\r\n      </main>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Home;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}